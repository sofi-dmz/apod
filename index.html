<!DOCTYPE html>
<html lang="en" data-bs-theme="dark">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
  <meta http-equiv="x-ua-compatible" content="ie=edge" />
  <title>APOD | Api</title>
  <!-- MDB icon -->
  <link rel="icon" href="img/mdb-favicon.ico" type="image/x-icon" />
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" />
  <!-- Google Fonts Roboto -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700;900&display=swap" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Manrope&family=Press+Start+2P&display=swap" rel="stylesheet">
  <!-- MDB -->
  <link rel="stylesheet" href="css/mdb.min.css" />
  <link rel="stylesheet" href="css/style.css" />
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

</head>

<body>
  <header>
    <!-- Intro settings -->
    <style>
      /* Default height for small devices */
      #intro-example {
        height: 400px;
      }

      /* Height for devices larger than 992px */
      @media (min-width: 992px) {
        #intro-example {
          height: 600px;
        }
      }
    </style>
  </header>
  <div class="container">
    <div class="row mt-4 text-center d-flex justify-content-center">
      <h1>APOD</h1>
      <p>Discover the cosmos with the astronomical picture of the day</p>
    </div>
    <div class="row d-flex align-items-center">
      <div class="col-md-8 mt-2">
        <img id="image" src="" class="w-100 fluid shadow-4-strong" alt="">
        <h6 class="mt-4">Choose another date! (Pstt.. try out your birthday)</h6>
        <input class="form-control" id="datepicker" type="date" required pattern="\d{4}-\d{2}-\d{2}" />
      </div>
      <div class="col-md-4 mt-4">
        <h1 id="title" class="mt-4"></h1>
        <p id="subtitle"></p>
        <p id="explanation"></p>
      </div>
    </div>
  </div>
  </main>
  <!-- End your project here-->

  <!-- MDB -->
  <script type="text/javascript" src="js/mdb.min.js"></script>
  <script type="text/javascript">
    let queryUrl = "https://api.nasa.gov/planetary/apod?";
    //Guardar API KEY ACÁ
    let queryKey = "api_key=ZeOa1oNaH8R1ThtT5WEsTYl8wdk0sY7aTV4KIdMn";
    let fullUrl = queryUrl + queryKey;
    let queryDate = "date=" + "2021-02-11" + "&";

    $(document).ready(function nasaRequest() {
      $.ajax({
          url: fullUrl,
          type: "GET",
          success: function (data) {
            console.log(data);
            let title = data.copyright;
            let date = data.date;
            let explanation = data.explanation;
            let hdurl = data.hdurl;
            let media_type = data.media_type;
            let service_version = data.service_version;
            let image = data.url;

            document.getElementById('image').src = image;
            document.getElementById('title').innerHTML = title;
            document.getElementById('subtitle').innerHTML = date;
            document.getElementById('explanation').innerHTML = explanation;
          },
          error: function (error) {
            console.log('Error');
          }
        })
      })
      let hoy = new Date();
      let semanaEnMilisegundos = 1000 * 60 * 60 * 24 * 7;
      let suma = hoy.getTime() - semanaEnMilisegundos;
      let fechaHaceUnaSemana = new Date(suma);
      document.getElementById('datepicker').valueAsDate = hoy;

      datepicker.addEventListener('input',(e) => {
        datepicker.textContent = datepicker.value;
        alert(datepicker.value);
        nasaRequest();
      });

      const Url = fullUrl;


    nasaRequest().onload;
  </script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
  <script
    src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.6.4/js/bootstrap-datepicker.min.js"></script>
  <script
    src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.6.4/locales/bootstrap-datepicker.nl.min.js"></script>
  <link
    href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.6.4/css/bootstrap-datepicker.standalone.min.css"
    rel="stylesheet" />

</body>

</html>